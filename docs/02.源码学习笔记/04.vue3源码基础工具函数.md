---
title: vue3æºç åŸºç¡€å·¥å…·å‡½æ•°
date: 2021-11-28 22:13:12
permalink: /pages/2eb5bb/
sidebar: auto
categories:
  - æºç å­¦ä¹ ç¬”è®°
tags:
  - 
---
# vue3æºç åŸºç¡€å·¥å…·å‡½æ•°[^1]

#### 1ã€`EMPTY_OBJ`ç©ºå¯¹è±¡

```javascript
/**
 * - `object.freeze` å†»ç»“å¯¹è±¡å†…ç½®api
 * - å†»ç»“å¯¹è±¡çš„æœ€å¤–å±‚æ— æ³•ä¿®æ”¹
 */
const EMPTY_OBJ_1 = Object.freeze({});
EMPTY_OBJ_1.name = 'å°æ›¹'
console.log(EMPTY_OBJ_1.name)
const EMPTY_OBJ_2 = Object.freeze({ props: { mp: 'å°æ›¹' } })
EMPTY_OBJ_2.props.name = 'å°æ›¹2'
EMPTY_OBJ_2.props2 = 'props2'
console.log(EMPTY_OBJ_2.props.name)
console.log(EMPTY_OBJ_2.props2)
console.log(EMPTY_OBJ_2)
```

<img src="https://pic-xiaocao123-1304191709.cos.ap-guangzhou.myqcloud.com/image-20211128141515512.png" alt="è¾“å‡ºç»“æœ" style="zoom:200%;" />

#### 2ã€`NOOP`ç©ºå‡½æ•°

>ä½¿ç”¨åœºæ™¯
>
>1. æ–¹ä¾¿åˆ¤æ–­ï¼šåˆå§‹åŒ–instanceçš„renderå±æ€§æ—¶å°†NOOPèµ‹å€¼äºå®ƒï¼Œrenderä¸€æ—¦å‘ç”Ÿäº†èµ‹å€¼è¡Œä¸ºä¸ç®¡è¢«èµ‹å€¼çš„æ–¹æ³•å­—é¢ä¸Šæ˜¯å¦å’ŒNOOPä¸€æ ·æœ€åéƒ½ä¸å†ç­‰äºNOOPäº†ã€‚å¯ä»¥ç”¨æ¥åˆ¤æ–­å±æ€§åˆå§‹åŒ–åç»­æœ‰æ— å†æ”¹å˜ã€‚
>
>2. æ–¹ä¾¿å‹ç¼©

```js
const NOOP = () => { }
const instance = { render: NOOP }
const dev = true;
// if (dev) {
//   instance.render = function () {
//     console.log('hello xiaocao render')
//   }
// }

if (instance.render === NOOP) {
  console.log(true)
}

instance.render()
```

![renderæ²¡æœ‰æ”¹å˜æ—¶](https://pic-xiaocao123-1304191709.cos.ap-guangzhou.myqcloud.com/image-20211128235758312.png)

```js
const NOOP = () => { }
const instance = { render: NOOP }
const dev = true;
 if (dev) {
   instance.render = function () {
     console.log('hello xiaocao render')
   }
 }

if (instance.render === NOOP) {
  console.log(true)
}

instance.render()
```

![renderèµ‹å€¼æ”¹å˜å](https://pic-xiaocao123-1304191709.cos.ap-guangzhou.myqcloud.com/image-20211128235925976.png)

#### 3ã€isOnåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦onå¼€å¤´

> - æ­£åˆ™è¡¨è¾¾å¼^åœ¨å¼€å¤´åˆ™è¡¨ç¤ºä»¥ä»€ä¹ˆä¸ºå¼€å¤´ï¼Œå¦åˆ™å°±æ˜¯æŒ‡éã€‚
>
> - $ç¬¦å·åœ¨ç»“å°¾åˆ™è¡¨ç¤ºä»¥ä»€ä¹ˆç»“å°¾
> - eg:`/^a[^a-z]b$/`ä»¥aå¼€å¤´çš„éa~zä¹‹é—´çš„ä»¥bç»“å°¾çš„å­—ç¬¦

```js

const onRE = /^on[^a-z]/
const isOn = key => console.log(onRE.test(key))

isOn('onhappy')//false
isOn('onHappy')//true

const ex = /^a[^a-z]b$/
const isEx = key => console.log(ex.test(key))
isEx('aSb')// true
isEx('awb')// false
isEx('aSS')// false
isEx('dSS')// false
```

#### 4ã€`remove`ç§»é™¤æ•°ç»„ä¸­çš„ä¸€é¡¹

> ç›¸å…³çŸ¥è¯†ï¼š
>
> - **Array.prototype.indexOf()**: `indexOf()`æ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚
> - **Array.prototype.splice()**:`splice()` æ–¹æ³•é€šè¿‡åˆ é™¤æˆ–æ›¿æ¢ç°æœ‰å…ƒç´ æˆ–è€…åŸåœ°æ·»åŠ æ–°çš„å…ƒç´ æ¥ä¿®æ”¹æ•°ç»„,å¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›è¢«ä¿®æ”¹çš„å†…å®¹ã€‚æ­¤æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„ã€‚
>
> <font color=#e74c3c><i>æ³¨ï¼š`splice`æ˜¯å¾ˆè€—æ€§èƒ½çš„æ–¹æ³•ï¼Œåˆ é™¤æ•°ç»„ä¸­çš„ä¸€é¡¹ï¼Œå…¶ä»–çš„å…ƒç´ éƒ½ä¼šç§»åŠ¨ä½ç½®ã€‚`axios InterceptorManager` æ‹¦æˆªå™¨ç§»é™¤æ‹¦æˆªå™¨æ—¶æ˜¯å°†æ‹¦æˆªå™¨è®¾ç½®ä¸ºnullã€‚æœ€åæ‰§è¡Œæ—¶ä¸ºnullçš„ä¸æ‰§è¡Œã€‚æ€§èƒ½æ›´åŠ ä¼˜åŒ–</i></font>

```js
// åˆ©ç”¨spliceç§»é™¤æ•°ç»„é¡¹
const remove = (arr, el) => {
  const i = arr.indexOf(el)
  if (i > -1) {
    arr.splice(i, 1)
  }
}

let arr = [1, 2, 3]
remove(arr, 3)
console.log(arr) // [1, 2]


// axiosæ‹¦æˆªå™¨ä»£ç 
// ä»£ç æœ‰åˆ å‡
// å£°æ˜
this.handlers = [];

// ç§»é™¤
if (this.handlers[id]) {
    this.handlers[id] = null;
}

// æ‰§è¡Œ
if (h !== null) {
    fn(h);
}
```

#### 5ã€åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥`onUpdate:`å¼€å¤´

> å‚è€ƒèµ„æ–™:[å®ä¾‹æ–¹æ³•ï¼šincludes(), startsWith(), endsWith()](https://es6.ruanyifeng.com/#docs/string-methods#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%EF%BC%9Aincludes-startsWith-endsWith)

```js
/**
 * - åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥`onUpdate:`å¼€å¤´
 */
const isModeListener = key => key.startsWith('onUpdate:');

console.log(isModeListener('onUpdate:change')) // true
console.log(isModeListener('1onUpdate:change'))// false
console.log(isModeListener('1onUpdatechange'))// false
```

#### 6ã€extend ç»§æ‰¿ åˆå¹¶

> åˆ©ç”¨Object.assignæ–¹æ³•å®ç°ç»§æ‰¿ä¸åˆå¹¶
>
> - `Object.assign()` æ–¹æ³•ç”¨äºå°†æ‰€æœ‰==å¯æšä¸¾å±æ€§==çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡åˆ†é…åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†==è¿”å›ç›®æ ‡å¯¹è±¡==ã€‚
>
> <font color=#ec4737>*å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„å±æ€§å…·æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™å±æ€§å°†è¢«æºå¯¹è±¡ä¸­çš„å±æ€§è¦†ç›–ã€‚åé¢çš„æºå¯¹è±¡çš„å±æ€§å°†ç±»ä¼¼åœ°è¦†ç›–å‰é¢çš„æºå¯¹è±¡çš„å±æ€§ã€‚*</font>

```js
/**
 * - extend ç»§æ‰¿ åˆå¹¶
 */
const extend = Object.assign;

const data = { name: 'å°æ›¹' }
const data2 = extend(data, { mp: 'å°æ›¹1', name: 'å°æ›¹1' })
console.log(data)
console.log(data2)
```

#### 7ã€hasOwn åˆ¤æ–­æ˜¯å¦æœ¬èº«æ‰€æ‹¥æœ‰çš„çš„å±æ€§

> - **Object.prototype.hasOwnProperty()**:`hasOwnProperty()` æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå¯¹è±¡==è‡ªèº«å±æ€§==ä¸­æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ˜¯å¦æœ‰æŒ‡å®šçš„é”®ï¼‰ã€‚

```js
/**
 * - hasOwn åˆ¤æ–­æ˜¯å¦æœ¬èº«æ‰€æ‹¥æœ‰çš„çš„å±æ€§ï¼Œä¸é€šè¿‡åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾
 */
const hasOwnProperty = Object.prototype.hasOwnProperty;
const hasOwn = (val, key) => hasOwnProperty.call(val, key)
console.log(hasOwn({__proto__: {a: 1}}, 'a'))// false
console.log(hasOwn({a: undefined}, 'a'))// true
console.log(hasOwn({}, 'toString'))// false
console.log(hasOwn({}, 'a'))// false
```

#### 8ã€isArrayåˆ¤æ–­æ•°ç»„

```js
const isArray = Array.isArray
console.log(isArray([]))

//ä¸¥è°¨æ”¹è‰¯ç‰ˆ
function isArray (arr) {
  return Object.prototype.toString.call(arr) === '[object Array]' &&
    Array.isArray(arr) &&
    arr.__proto__ === Array.prototype &&
    arr instanceof Array
}

```

#### 9ã€isMapåˆ¤æ–­æ˜¯å¦ä¸ºmap

```js
/**
 * - isMapåˆ¤æ–­æ˜¯å¦ä¸ºMapå¯¹è±¡
 */

const isMap = val => val.toString() === '[object Map]'

const map = new Map()
const o = { p: 'hello word' }
map.set(o, 'content')
console.log(map)
console.log(isMap({}))// false
console.log(isMap(map))// true
```

#### 10ã€isSetåˆ¤æ–­æ˜¯å¦setå¯¹è±¡

```js
const isSet = (val) => toTypeString(val) === '[object Set]';

const set = new Set();
console.log(isSet(set)) // true
```

#### 11ã€isDateåˆ¤æ–­æ˜¯å¦Dateå¯¹è±¡

> `instanceof`æ“ä½œç¬¦å·¦è¾¹æ˜¯å³è¾¹çš„å®ä¾‹ï¼›
>
> - åŸç†æ˜¯æ ¹æ®åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¦‚æœèƒ½æ‰¾åˆ°åˆ™è¿”å›trueï¼›æ‰€ä»¥å¹¶ä¸æ˜¯éå¸¸å‡†ç¡®

```js
const isDate = val => console.log(val instanceof Date)

isDate(new Date)// true
isDate({ __proto__: new Date() })// true ä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯false 
```

#### 12ã€isFunctionåˆ¤æ–­æ˜¯ä¸æ˜¯å‡½æ•°

```js
const isFunction = val => typeof val === 'function'
console.log(isFunction(()=>{}))// true
console.log(isFunction({}))// false
console.log(isFunction(new Function))// true
```

#### 13ã€ç”±toTypeString å¯¹è±¡è½¬å­—ç¬¦ä¸²ç­‰å¼•ç”³çš„å‡çº§ç‰ˆtypeof

> ğŸ’¡**Object.prototype.toString.call(obj)**ï¼šé€šè¿‡callæ”¹å˜è·å–toStringæ–¹æ³•è·å–ç±»å‹'[object String]'æ¥è¿›è¡Œç®€å•çš„ç±»å‹åˆ¤æ–­

```js
/**
 * -typeofè¿›é˜¶ç‰ˆ
 * @param {*} obj éœ€è¦è¿›è¡Œæ£€æŸ¥çš„å‚æ•°
 * @param {boolean} fullClass æ˜¯å¦ä»…ä»…æ˜¯ç®€å•è¿›è¡Œç±»å‹åˆ¤æ–­
 * @returns {string} ç±»å‹å­—ç¬¦ä¸²
 */
function type (obj, fullClass) {
  if (fullClass) {
    return (obj === null) ? '[object Null]' : Object.prototype.toString.call(obj)
  }
  // åˆ¤æ–­å‚æ•°ä¸ºNullç›´æ¥è¿”å›å­—ç¬¦ä¸²â€™nullâ€˜
  if (obj === null) {
    return (obj + '').toLowerCase()
  }
  var deepType = Object.prototype.toString.call(obj).slice(8, -1).toLowerCase()
  if (deepType === 'generatorfunction') {
    return 'function'
  }

  // æ£€æŸ¥ä¸€ä¸‹é˜²æ­¢è¾¹ç¼˜æƒ…å†µçš„å‘ç”Ÿå¯¼è‡´åˆ¤æ–­ä¸å‡†ç¡®ï¼Œæ¯”å¦‚[object, HTMLDivElement]..
  return deepType.match(/^(array|bigint|date|error|function|generator|regexp|symbol)$/) ?
    deepType : (typeof obj === 'object' || typeof obj === 'function') ? 'object' : typeof obj;
}
```

[^1]:[åˆå­¦è€…ä¹Ÿèƒ½çœ‹æ‡‚çš„ Vue3 æºç ä¸­é‚£äº›å®ç”¨çš„åŸºç¡€å·¥å…·å‡½æ•°](https://juejin.cn/post/6994976281053888519) â†©
